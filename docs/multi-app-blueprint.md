## Multi-app blueprint (Silexa)

This blueprint standardizes how we build and operate many web apps (SaaS, blogs,
marketing sites, internal tools) while keeping Silexa routing, dyads, and
monitoring consistent.

### Goals
- Keep app structure predictable across teams and dyads.
- Make capabilities explicit (auth, billing, CMS, analytics).
- Keep infra and maintenance consistent so agents can operate safely.

### Canonical app layout
```
apps/<app>/
  app/                 # frontend (Next.js/Svelte/etc.)
  api/                 # optional backend service (Go/TS)
  infra/               # Pulumi (or other IaC)
  content/             # optional blog/marketing content
  docs/
    plan.md            # generated by bin/start-app-project.sh
  migrations/          # per-app DB migrations
  ui-tests/
    targets.json       # visual test targets
  app.json             # app metadata (capabilities, owners)
```

### App metadata (apps/<app>/app.json)
This file is the source of truth for capabilities, owners, and stack choices.
Agents should read it before starting work.

Example:
```json
{
  "name": "acme-billing",
  "kind": "saas",
  "stack": {
    "frontend": "nextjs",
    "backend": "nextjs"
  },
  "modules": ["auth", "billing", "analytics"],
  "owners": {
    "department": "web",
    "dyad": "web-acme"
  },
  "data": {
    "db": "postgres",
    "cache": ""
  },
  "integrations": ["stripe", "postmark"],
  "status": "idea"
}
```

### Capability modules
Keep reusable capability modules in one place so apps can opt in quickly.

Suggested structure:
```
packages/modules/<module>/
  README.md            # install steps + required env vars
  migrations/          # optional DB changes
  scripts/             # optional provisioning helpers
```

Common modules: auth, billing, CMS, analytics, email, search, notifications.

### Silexa integration (per app)
1) Bootstrap the app:
   - `bin/start-app-project.sh <app>`
   - Fill `apps/<app>/app.json` and `apps/<app>/docs/plan.md`.
2) Register dyads:
   - `bin/dyadctl.sh register <app> <role> <department>`
3) Route tasks:
   - Add app keywords to `configs/router_rules.json` as needed.
4) Provision DB:
   - `bin/app-db.sh create <app>` and use `secrets/db-<app>.env`.
5) Document CI/deploy in `apps/<app>/infra/` and update plan.

### Lifecycle references
- `docs/app-lifecycle.md` for intake → build → operate.
- `docs/web_app_flow.md` for dyad responsibilities and QA.

### Maintenance cadence
- Weekly: health checks, broken links, and perf/regression review.
- Monthly: module updates and dependency refresh.
- Quarterly: access and secrets audit, cost review.
